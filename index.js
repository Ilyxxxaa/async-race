(()=>{"use strict";var e={16:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(645),a=n.n(i)()((function(e){return e[1]}));a.push([e.id,'html{box-sizing:border-box}*,*::after,*::before{box-sizing:inherit}ul[class],ol[class]{padding:0}body,h1,h2,h3,h4,h5,h6,p,ul[class],ol[class],li,figure,figcaption,blockquote,dl,dd{margin:0}ul[class]{list-style:none;font-family:inherit}img{max-width:100%;display:block}input,button,textarea,select{font:inherit}a{text-decoration:none}body{min-height:100vh;max-width:1440px;margin:0 auto;padding:30px 10px;font-family:"Roboto",sans-serif}header{display:flex;align-items:center;justify-content:center;padding-bottom:10px}.btn{width:200px;box-sizing:border-box;padding:0 20px;margin:0 15px 15px 0;outline:none;border:none;border-radius:6px;height:40px;line-height:40px;font-size:17px;font-weight:600;text-decoration:none;color:#385898;background-color:#e7f3ff;cursor:pointer;appearance:none;touch-action:manipulation}.btn:focus-visible{box-shadow:0 0 0 2px #666}.btn:hover{background-color:#dbe7f2}.btn:active{transform:scale(0.96)}.btn:disabled{pointer-events:none;opacity:.65}.carSettingsContainer{max-width:370px;display:flex;flex-direction:column;justify-content:space-between;align-items:center;padding:0 10px 10px 10px}.section{display:flex;justify-content:space-between;align-items:center;width:100%;padding-bottom:15px}.sectionUpdate{padding-bottom:10px}.input{margin-right:10px;width:200px;text-transform:capitalize}.color-input{margin-right:10px;cursor:pointer}.btn1{box-sizing:border-box;outline:none;border:none;margin-right:10px;border-radius:4px;height:30px;width:80px;background-color:#5181b8;line-height:30px;font-size:16px;font-weight:normal;text-decoration:none;vertical-align:top;color:#fff;cursor:pointer;appearance:none;touch-action:manipulation;overflow:hidden}.btn1:focus-visible{box-shadow:0 0 0 3px #87cefa}.btn1:hover{opacity:.88}.btn1:active{line-height:32px}.btn1:disabled{pointer-events:none;opacity:.65}.btn2{width:100px;margin-right:10px;cursor:pointer;outline:none;border:none;border-radius:6px;font-size:19px;text-decoration:none;color:#385898;background-color:#e7f3ff;appearance:none;touch-action:manipulation}.btn2:focus-visible{box-shadow:0 0 0 2px #666}.btn2:hover{background-color:#dbe7f2}.btn2:active{transform:scale(0.96)}.btn2:disabled{pointer-events:none;opacity:.65}.btnGenerateCars{font-size:14px}.resetBtn:hover{color:red;font-weight:bold}.btnStartRace{background-color:#3ac41b;color:#fff}.btnStartRace:hover{background-color:#37e50b}.garageContainer{display:flex;flex-direction:column;justify-content:space-between;align-items:center;position:relative}.garageTitleContainer{display:flex;justify-content:space-between;align-items:center;padding-bottom:14px;font-size:26px}.garageTitleName{margin-right:5px}.garagePageAmount{font-size:20px;padding-bottom:20px}.garageCars{min-height:500px;width:100%}.garagePagination{display:flex;justify-content:space-between}.car__field{height:110px;border:none;border-bottom:5px solid #000;border-bottom-style:dotted;margin-bottom:5px}.car__field-top{display:flex;justify-content:start;align-items:center;padding-bottom:5px}.car__field-top-btn{width:100px;margin-right:10px;cursor:pointer;outline:none;border:none;border-radius:6px;font-size:17px;text-decoration:none;color:#385898;background-color:#e7f3ff;appearance:none;touch-action:manipulation}.car__field-top-btn:focus-visible{box-shadow:0 0 0 2px #666}.car__field-top-btn:hover{background-color:#dbe7f2}.car__field-top-btn:active{transform:scale(0.96)}.car__field-top-btn:disabled{pointer-events:none;opacity:.65}.car__field-remove{margin-right:20px}.car__field-remove:hover{color:red;font-weight:bold}.car__field-model{font-weight:bold}.car__field-main{display:flex;justify-content:start;align-items:center;position:relative}.car__field-btn{align-self:flex-start;cursor:pointer}.car-image{position:absolute;width:120px;left:60px;bottom:-47px;transform:translateX(0px)}.flag-image{width:50px;position:absolute;bottom:-45px;right:100px}.pagination-btn{width:100px;box-sizing:border-box;padding:0 20px;margin:0 15px 0 0;outline:none;border:none;border-radius:6px;height:40px;line-height:40px;font-size:17px;font-weight:600;text-decoration:none;color:#385898;background-color:#e7f3ff;cursor:pointer;appearance:none;touch-action:manipulation}.pagination-btn:focus-visible{box-shadow:0 0 0 2px #666}.pagination-btn:hover{background-color:#dbe7f2}.pagination-btn:active{transform:scale(0.96)}.pagination-btn:disabled{pointer-events:none;opacity:.65}.car__field-btn{box-sizing:border-box;outline:none;border:none;margin-right:10px;border-radius:4px;height:30px;width:30px;line-height:30px;font-size:16px;font-weight:normal;text-decoration:none;vertical-align:top;color:#fff;cursor:pointer;appearance:none;touch-action:manipulation;overflow:hidden}.car__field-btn:focus-visible{box-shadow:0 0 0 3px #87cefa}.car__field-btn:hover{opacity:.88}.car__field-btn:active{line-height:32px}.car__field-btn:disabled{pointer-events:none;opacity:.65}.car-start-btn{background-color:#5181b8}.car-stop-btn{background-color:#dfe6ed;color:#55677d}.garageModal{position:fixed;top:250px;padding-top:200px;left:0;right:0;bottom:0;justify-content:center;background-color:rgba(0,0,0,0);font-size:50px;font-weight:bold;display:none}.garageModal--active{display:flex}.winnersContainer{display:flex;flex-direction:column;align-items:center;justify-content:space-between}.winnersTitle{margin-bottom:20px}.winnersPageNumber{margin-bottom:20px}.winnersTable{margin-bottom:30px;text-align:center;color:#3872be;min-height:200px}th{color:#000;font-size:16px;padding:10px;width:100px;border-bottom:3px solid #3872be}.tableHead{cursor:default}.tableHeadCar{width:200px}.tableHeadWins,.tableHeadTime{cursor:pointer}td{padding:3px}td svg{width:80px}',""]);const r=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(i)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);i&&a[d[0]]||(n&&(d[2]?d[2]="".concat(n," and ").concat(d[2]):d[2]=n),t.push(d))}},t}},379:(e,t,n)=>{var i,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function o(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},i=[],a=0;a<e.length;a++){var s=e[a],d=t.base?s[0]+t.base:s[0],c=n[d]||0,l="".concat(d," ").concat(c);n[d]=c+1;var u=o(l),h={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(r[u].references++,r[u].updater(h)):r.push({identifier:l,updater:p(h,t),references:1}),i.push(l)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,i){var a=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function h(e,t,n){var i=n.css,a=n.media,r=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var m=null,g=0;function p(e,t){var n,i,a;if(t.singleton){var r=g++;n=m||(m=d(t)),i=u.bind(null,n,r,!1),a=u.bind(null,n,r,!0)}else n=d(t),i=h.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var a=o(n[i]);r[a].references--}for(var d=s(e,t),c=0;c<n.length;c++){var l=o(n[c]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}n=d}}}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),i=n(16);t()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;class a{constructor(){this.header=document.createElement("header"),this.garageBTN=document.createElement("button"),this.winnersBTN=document.createElement("button"),this.mainContainer=document.createElement("div")}drawHeader(e,t,n){this.createGarageBTN(),this.createWinnersBTN(),this.createMainContainer(),this.header.append(this.garageBTN),this.header.append(this.winnersBTN),document.body.append(this.header),document.body.append(this.mainContainer),this.addListener(e,t,n)}createGarageBTN(){this.garageBTN.classList.add("btn","garageBTN"),this.garageBTN.textContent="Garage"}createWinnersBTN(){this.winnersBTN.classList.add("btn","winnersBTN"),this.winnersBTN.textContent="Winners"}createMainContainer(){this.mainContainer.classList.add("mainContainer")}addListener(e,t,n){const i=n;this.garageBTN.addEventListener("click",(()=>("winners"===i.view&&(e(i),i.view="garage"),!1))),this.winnersBTN.addEventListener("click",(()=>{const e=document.querySelector(".garageModal"),n=document.querySelector(".btnStartRace");return"garage"===i.view&&(t(i),i.view="winners",e&&e.classList.remove("garageModal--active"),n&&(n.disabled=!1)),!1}))}}var r=function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((i=i.apply(e,t||[])).next())}))};class o{constructor(){this.garage="http://127.0.0.1:3000/garage",this.engine="http://127.0.0.1:3000/engine",this.winners="http://127.0.0.1:3000/winners"}getCars(e,t=7){return r(this,void 0,void 0,(function*(){const n=yield fetch(`${this.garage}?_page=${e}&_limit=${t}`);return{items:yield n.json(),count:n.headers.get("X-Total-Count")}}))}getCar(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.garage}/${e}`)).json()}))}createCar(e){return r(this,void 0,void 0,(function*(){return(yield fetch(this.garage,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}))}deleteCar(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.garage}/${e}`,{method:"DELETE"})).json()}))}updateCar(e,t){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.garage}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}))}startEngine(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.engine}?id=${e}&status=started`,{method:"PATCH"})).json()}))}stopEngine(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.engine}?id=${e}&status=stopped`,{method:"PATCH"})).json()}))}drive(e){return r(this,void 0,void 0,(function*(){const t=yield fetch(`${this.engine}?id=${e}&status=drive`,{method:"PATCH"}).catch();return 200!==t.status?{success:!1}:Object.assign({},yield t.json())}))}getSortOrder(e,t){return e&&t?`&_sort=${e}&_order=${t}`:""}getWinners({page:e,limit:t=10,sort:n,order:i}){return r(this,void 0,void 0,(function*(){const a=yield fetch(`${this.winners}?_page=${e}&_limit=${t}${this.getSortOrder(n,i)}`),o=yield a.json();return{items:yield Promise.all(o.map((e=>r(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{car:yield this.getCar(e.id)})}))))),count:a.headers.get("X-Total-Count")}}))}getWinner(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.winners}/${e}`)).json()}))}getWinnerStatus(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.winners}/${e}`)).status}))}deleteWinner(e){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.winners}/${e}`,{method:"DELETE"})).json()}))}createWinner(e){return r(this,void 0,void 0,(function*(){return(yield fetch(this.winners,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()}))}updateWinner(e,t){return r(this,void 0,void 0,(function*(){return(yield fetch(`${this.winners}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()}))}saveWinner(e){return r(this,void 0,void 0,(function*(){if(404===(yield this.getWinnerStatus(e.id)))yield this.createWinner({id:e.id,wins:1,time:e.time});else{const t=yield this.getWinner(e.id);yield this.updateWinner(e.id,{wins:t.wins+1,time:e.time<t.time?e.time:t.time})}}))}}class s{constructor(){this.carSettingsContainer=document.createElement("div"),this.sectionCreate=document.createElement("div"),this.sectionUpdate=document.createElement("div"),this.sectionButtons=document.createElement("div"),this.inputCreateCar=document.createElement("input"),this.inputUpdateCar=document.createElement("input"),this.inputCreateColor=document.createElement("input"),this.inputUpdateColor=document.createElement("input"),this.btnCreateCar=document.createElement("button"),this.btnUpdateCar=document.createElement("button"),this.btnStartRace=document.createElement("button"),this.resetBTN=document.createElement("button"),this.btnGenerateCars=document.createElement("button")}drawSettings(){return e=this,t=void 0,i=function*(){this.makeElements(),this.sectionCreate.append(this.inputCreateCar,this.inputCreateColor,this.btnCreateCar),this.sectionUpdate.append(this.inputUpdateCar,this.inputUpdateColor,this.btnUpdateCar),this.sectionButtons.append(this.btnStartRace,this.resetBTN,this.btnGenerateCars),this.carSettingsContainer.append(this.sectionCreate,this.sectionUpdate,this.sectionButtons)},new((n=void 0)||(n=Promise))((function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((i=i.apply(e,t||[])).next())}));var e,t,n,i}makeElements(){this.makeCarSettingsContainer(),this.makeSectionCreate(),this.makeSectionUpdate(),this.makeSectionButtons(),this.makeInputCreateCar(),this.makeInputUpdateCar(),this.makeInputCreateColor(),this.makeInputUpdateColor(),this.makeBtnCreateCar(),this.makeBtnStartRace(),this.makeBtnUpdateCar(),this.makeResetBTN(),this.makeBtnGenerateCars()}makeCarSettingsContainer(){this.carSettingsContainer.classList.add("carSettingsContainer")}makeSectionCreate(){this.sectionCreate.classList.add("section","sectionCreate")}makeSectionUpdate(){this.sectionUpdate.classList.add("section","sectionUpdate")}makeSectionButtons(){this.sectionButtons.classList.add("section","sectionButtons")}makeInputCreateCar(){this.inputCreateCar.setAttribute("type","text"),this.inputCreateCar.classList.add("input","createCarInput")}makeInputUpdateCar(){this.inputUpdateCar.setAttribute("type","text"),this.inputUpdateCar.setAttribute("disabled","true"),this.inputUpdateCar.classList.add("input","updateCarInput")}makeInputCreateColor(){this.inputCreateColor.setAttribute("type","color"),this.inputCreateColor.setAttribute("value","#e66465"),this.inputCreateColor.classList.add("color-input","createColorInput")}makeInputUpdateColor(){this.inputUpdateColor.setAttribute("type","color"),this.inputUpdateColor.setAttribute("value","#e12583"),this.inputUpdateColor.classList.add("color-input","updateColorInput")}makeBtnCreateCar(){this.btnCreateCar.classList.add("createCarBtn","btn1"),this.btnCreateCar.textContent="CREATE"}makeBtnUpdateCar(){this.btnUpdateCar.classList.add("updateCarBtn","btn1"),this.btnUpdateCar.textContent="UPDATE"}makeBtnStartRace(){this.btnStartRace.classList.add("btnStartRace","btn2"),this.btnStartRace.textContent="RACE"}makeResetBTN(){this.resetBTN.classList.add("resetBtn","btn2"),this.resetBTN.textContent="RESET",this.resetBTN.setAttribute("disabled","true")}makeBtnGenerateCars(){this.btnGenerateCars.classList.add("btnGenerateCars","btn2"),this.btnGenerateCars.textContent="GENERATE CARS"}}class d{constructor(){this.garageContainer=document.createElement("div"),this.garageTitleContainer=document.createElement("div"),this.garageTitleName=document.createElement("div"),this.garageTitleAmount=document.createElement("span"),this.garagePageAmount=document.createElement("div"),this.garageCars=document.createElement("div"),this.garagePagination=document.createElement("div"),this.paginationPrev=document.createElement("button"),this.paginationNext=document.createElement("button"),this.garageModal=document.createElement("div")}drawGarage(e){return t=this,n=void 0,a=function*(){this.makeElements(e),this.garageTitleContainer.append(this.garageTitleName,this.garageTitleAmount),this.garagePagination.append(this.paginationPrev,this.paginationNext),this.garageContainer.append(this.garageTitleContainer,this.garagePageAmount,this.garageCars,this.garagePagination,this.garageModal)},new((i=void 0)||(i=Promise))((function(e,r){function o(e){try{d(a.next(e))}catch(e){r(e)}}function s(e){try{d(a.throw(e))}catch(e){r(e)}}function d(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,s)}d((a=a.apply(t,n||[])).next())}));var t,n,i,a}makeElements(e){this.makeGarageContainer(),this.makeGarageTitleContainer(),this.makeGarageTitleName(),this.makeGarageTitleAmount(),this.makeGaragePageAmount(e),this.makeGarageCars(),this.makeGaragePagination(),this.makePaginationPrev(),this.makePaginationNext(),this.makeGarageModal()}makeGarageContainer(){this.garageContainer.classList.add("garageContainer")}makeGarageTitleContainer(){this.garageTitleContainer.classList.add("garageTitleContainer")}makeGarageTitleName(){this.garageTitleName.classList.add("garageTitleName"),this.garageTitleName.textContent="Garage "}makeGarageTitleAmount(){this.garageTitleAmount.classList.add("garageTitleAmount"),this.garageTitleAmount.textContent=" (0)"}makeGaragePageAmount(e){this.garagePageAmount.classList.add("garagePageAmount"),this.garagePageAmount.textContent=`Page #${e.page}`}makeGarageCars(){this.garageCars.classList.add("garageCars")}makeGaragePagination(){this.garagePagination.classList.add("garagePagination")}makePaginationPrev(){this.paginationPrev.classList.add("paginationPrev","pagination-btn"),this.paginationPrev.setAttribute("id","paginationPrev"),this.paginationPrev.textContent="PREV"}makePaginationNext(){this.paginationNext.classList.add("paginationNext","pagination-btn"),this.paginationNext.textContent="NEXT",this.paginationNext.setAttribute("id","paginationNext")}makeGarageModal(){this.garageModal.classList.add("garageModal")}}class c{constructor(){this.mainSection=document.createElement("div"),this.carSettings=new s,this.garage=new d}drawMainSection(e){const t=document.querySelector(".mainContainer");this.carSettings.drawSettings(),this.garage.drawGarage(e),this.mainSection.append(this.carSettings.carSettingsContainer,this.garage.garageContainer),t&&(t.innerHTML="",t.append(this.mainSection))}makeMainSection(){this.mainSection.classList.add("mainSection")}}class l{getPositionAtCenter(e){const{top:t,left:n,width:i,height:a}=e.getBoundingClientRect();return{x:n+i/2,y:t+a/2}}getDistanceBetweenElements(e,t){const n=this.getPositionAtCenter(e),i=this.getPositionAtCenter(t);return Math.hypot(n.x-i.x,n.y-i.y)}animation(e,t,n){let i=null;const a=e,r={id:0};return r.id=window.requestAnimationFrame((function e(o){i||(i=o);const s=o-i,d=Math.round(s*(t/n));a.style.transform=`translateX(${Math.min(d,t)}px)`,d<t&&(r.id=window.requestAnimationFrame(e))})),r}}class u{createTemplate(e,t,n){return` <div class="car__field" id ="${n}">\n    <div class="car__field-top">\n        <button class="car__field-select car__field-top-btn">Select</button>\n        <button class="car__field-remove car__field-top-btn">Remove</button>\n        <div class="car__field-model">${e}</div>\n    </div>\n    <div class="car__field-main">\n        <button class="car__field-btn car-start-btn">A</button>\n        <button class="car__field-btn car-stop-btn" disabled ='true'>B</button>\n        <div class="car-image" data-color="${t}">\n            ${this.returnSVG(t)}\n        </div>\n        <div class="flag-image">\n            <img src="assets/images/flag.svg" alt="flag">\n        </div>\n    </div>\n</div>`}createRowTemplate(e,t,n){return` \n    <td class="tableData tableNumber">\n        ${this.createWinnerNumber(n,t)}\n    </td>\n    <td class="tableData tableCar">\n        ${this.returnSVG(e.car.color)}\n    </td>\n    <td class="tableData tableName">\n    ${e.car.name}\n   </td>\n   <td class="tableData tableWins">\n   ${e.wins}\n</td>\n    <td class="tableData tableTime">\n    ${e.time}\n    </td>\n`}createWinnerNumber(e,t){return 1===e?t+1:10*(e-1)+t+1}generateRandomCars(){return new Array(100).fill(1).map((()=>({name:this.getRandomName(),color:this.getRandomColor()})))}getRandomName(){return`${["Opel","Audi","BMW","Mersedes","Lada","Volkswagen","Kia","Tesla","Hyundai","Mazda"][Math.floor(10*Math.random())]} ${["Vectra","Q7","M5","AMG","Granta","Polo","Rio","Model S","Santa Fe","CX-9"][Math.floor(10*Math.random())]}`}getRandomColor(){let e="#";for(let t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}returnSVG(e){return`<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 180" width="120" height="43" fill="${e}">\n<path fill-rule="evenodd" d="m2.2 125.4c0.9-4.5 2.2-9.9 2.2-9.9l-0.2-11.8c0 0 7.5-3.8 7.8-5.6 0.2-1.8 1.1-23.1 3.5-26.8 \n2.5-3.8-1.1-17.1-1.1-17.1h17.4c0 0 17.6-15.1 30-20.7 0 0 2-8.7-5.3-13.3l-0.2-2.7c0 0 16-2.2 37.3-3.8 0 0 7.3-7.9 18-9.1 \n10.7-1.2 135.3-10 166.2 13.4 30.9 23.4 53.1 39 53.1 39 0 0 126.9-0.8 157.2 31.6 0 0 0.4 11.1 0 16.9 0 0 3.1 5.3 7.3 6.6 \n4.3 1.3-1.1 8.8-1.1 8.8 0 0-8.9 4.8-9.5 11.6-0.7 6.9-18.1 15.6-26.3 21.6 0 0 5.2-58-44.5-62.4-49.7-4.5-53.2 59.1-53.2 \n59.1h-180.3c0 0-23.6 7.1-29.4 3.3 0 0-2.2-62.4-47.2-62.4-45 0-52.5 38.6-49 56 0 0-12.4 0.4-17.8-4.5-5.3-4.9-16.5-0.9-16.5-0.9 \n0 0-12.9 0.5-9.3-5.8 0 0-10-6.5-9.1-11.1zm10.2 0.6l34.5 1.7c0 0 13.8-42.7 55.7-42.4 41.8 0.3 50.3 47.2 50.3 47.2l205.3 2.1c0 0 \n2.1-45 50.6-49.3 48.6-4.3 54.4 49.3 54.4 49.3 0 0 12.2-0.1 15.3-2.5 0 0-8.7-0.9-11.1-3.1-2.5-2.2-4.7-48.4-56.3-48.4-51.7 0-57.9 \n47.2-57.9 47.2l-195.9 0.3c0 0-8.7-39.8-49.6-46.4l0.2-19.3 3.1-4.8c35.2 2.4 70.9 3.4 102.4 3.6l1.2 63.4c6-29.4 1.9-53.9-0.3-63.4q6 \n0 11.7 0c20.6 0 39-0.3 53.6-0.6l-0.5-1.2c-0.9-2.5-1.1-4.7-1-6.5-0.4-7.9 6.7-9.2 6.7-9.2-18.2-14.4-47.8-19.7-59.4-20.2-11.6-0.4-6.8 \n9.7-6.8 9.7l6.6 24.5-11.8-0.2c0-0.1-0.1 0.1-0.1 0h-0.1c-3.8-0.1-7.5-0.2-11.3-0.2l-0.1-0.2-3-33.6c0 0-49.3-2.6-58 13.1l2.1 \n19.3c-11.3-0.2-21.8 0.2-30.6 0.1l-0.5-0.1-26.9-0.4c8.3 0.7 16.7 1.4 25.1 2l-4.8 4.2-0.4 18.6c0 0-46.3-0.4-60.1 43.2 0 \n0-9.6-8.3-10.7-17.6 0 0-14.7 3.1-26.7 0 0 0-2.5 8.6 5.1 20.1zm34.8-69.2c1.6-1.1 26.8-19.2 30.9-22.9 4.2-3.7 4.6-7.3 \n4.6-7.3zm270.7 0.1c0 0-43.4-35-74.2-40.5-30.7-5.6-98.1-2.7-118.2 7.3-19.3 9.7-74 30.1-39.9 31.5-19.2-10.4 67.1-35 \n67.1-35 0 0 75.2-7.8 103.3 2.4 28 10.2 59 36.7 59 36.7 3.3 0.1 5.1 0.2 5.1 0.2zm-205-47.3l5.3 4c95.3-8.9 133.8-0.6 \n147.8 4.7-50.5-22.4-153.1-8.7-153.1-8.7zm-48.1 10.8v3.1c0 0 28.5-4.7 44.5-5.9zm232 39.8c0 0 7.1-4.6 \n2.3-9.8-4.7-5.1-10.7-4.8-10.7-4.8 0 0 13 5.7 8.4 14.6zm27.1 1.9c21.3 16.9 9.2 59.3 8.3 62.2 21-50.5-8.3-62.2-8.3-62.2zm19.5 \n62.4h7.8c3.3-22.1 17.5-32.1 17.5-32.1-17.5-1.5-25.3 32.1-25.3 32.1zm138.3-28c4.4-4.4 0-8.7 0-8.7-18.9-14-60.1-14.3-60.1-14.3 \n29.1 9 33.1 17.6 39.9 21.2 6.8 3.6 20.2 1.8 20.2 1.8zm-457.2-32.4c-13.7 15.2 2 16.2 19.2 10.8 17.1-5.3 15.1-10.8 \n15.1-10.8zm225.2 8c0-0.9-0.8-1.7-1.7-1.7h-25.9c-0.9 0-1.6 0.8-1.6 1.7 0 0.9 0.7 1.6 1.6 1.6h25.9c0.9 0 1.7-0.7 \n1.7-1.6zm-104.9-2.2c0-0.9-0.7-1.5-1.5-1.5h-25.8c-0.9 0-1.5 0.6-1.5 1.5 0 0.8 0.6 1.4 1.5 1.4h25.8c0.8 0 1.5-0.6 1.5-1.4z"/>\n<path d="m266 18.4q3.8 1.6 7 3.5c-0.1-0.1-1.9-1.6-7-3.5z"/>\n<path fill-rule="evenodd" d="m101.9 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 \n0-16.3 13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 4-3.9 \n0-2.2-1.8-3.9-4-3.9-2.2 0-4 1.7-4 3.9zm21-18.5l-10.1 16 18.2-0.4c2-9.1-8.1-15.6-8.1-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 \n9.3-14.9 9.3-14.9zm-15.6 19.1l-9.2-16.5-8.4 16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 \n15.6zm9.3-23.6l-11.7-13.9c-8.4 4.1-7.2 16.1-7.2 16.1z"/>\n<path fill-rule="evenodd" d="m102.5 97.4c22.8 0 41.2 18.3 41.2 41 0 22.7-18.4 41-41.2 41-22.8 0-41.2-18.3-41.2-41 0-22.7 18.4-41 41.2-41zm-33.2 \n40.2c0 17.9 14.6 32.5 32.6 32.5 18.1 0 32.7-14.6 32.7-32.5 0-18-14.6-32.5-32.7-32.5-18 0-32.6 14.5-32.6 32.5z"/>\n<path fill-rule="evenodd" d="m101.9 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 \n0-16.3 13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 4-3.9 \n0-2.2-1.8-3.9-4-3.9-2.2 0-4 1.7-4 3.9zm21-18.5l-10.1 16 18.2-0.4c2-9.1-8.1-15.6-8.1-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 \n9.3-14.9 9.3-14.9zm-15.6 19.1l-9.2-16.5-8.4 16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 \n15.6zm9.3-23.6l-11.7-13.9c-8.4 4.1-7.2 16.1-7.2 16.1z"/>\n<path fill-rule="evenodd" d="m101.9 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 0-16.3 \n13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 \n4-3.9 0-2.2-1.8-3.9-4-3.9-2.2 0-4 1.7-4 3.9zm21-18.5l-10.1 16 18.2-0.4c2-9.1-8.1-15.6-8.1-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 \n9.3-14.9 9.3-14.9zm-15.6 19.1l-9.2-16.5-8.4 16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 \n15.6zm9.3-23.6l-11.7-13.9c-8.4 4.1-7.2 16.1-7.2 16.1z"/>\n<path fill-rule="evenodd" d="m409.1 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 0-16.3 \n13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 4-3.9 \n0-2.2-1.8-3.9-4-3.9-2.2 0-4 1.7-4 3.9zm21-18.5l-10.2 16 18.2-0.4c2.1-9.1-8-15.6-8-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 \n9.3-14.9 9.3-14.9zm-15.6 19.1l-9.3-16.5-8.3 16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 \n15.6zm9.3-23.6l-11.8-13.9c-8.3 4.1-7.1 16.1-7.1 16.1z"/>\n<path fill-rule="evenodd" d="m409.7 97.4c22.8 0 41.2 18.3 41.2 41 0 22.7-18.4 41-41.2 41-22.8 0-41.2-18.3-41.2-41 0-22.7 18.4-41 \n41.2-41zm-33.2 40.2c0 17.9 14.6 32.5 32.6 32.5 18.1 0 32.7-14.6 32.7-32.5 0-18-14.6-32.5-32.7-32.5-18 0-32.6 14.5-32.6 32.5z"/>\n<path fill-rule="evenodd" d="m409.1 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 0-16.3 \n13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 4-3.9 0-2.2-1.8-3.9-4-3.9-2.2 \n0-4 1.7-4 3.9zm21-18.5l-10.2 16 18.2-0.4c2.1-9.1-8-15.6-8-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 9.3-14.9 9.3-14.9zm-15.6 19.1l-9.3-16.5-8.3 \n16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 15.6zm9.3-23.6l-11.8-13.9c-8.3 4.1-7.1 16.1-7.1 16.1z"/>\n<path fill-rule="evenodd" d="m409.1 108.1c16.4 0 29.7 13.2 29.7 29.5 0 16.3-13.3 29.5-29.7 29.5-16.4 0-29.7-13.2-29.7-29.5 \n0-16.3 13.3-29.5 29.7-29.5zm-9.6 6.3l9.6 16.4 8-16.4c-7.1-5.9-17.6 0-17.6 0zm6.2 23.2c0 2.2 1.8 3.9 4 3.9 2.2 0 4-1.7 4-3.9 \n0-2.2-1.8-3.9-4-3.9-2.2 0-4 1.7-4 3.9zm21-18.5l-10.2 16 18.2-0.4c2.1-9.1-8-15.6-8-15.6zm6.8 23.8l-19-0.4 9.7 15.3c8.9-2.8 \n9.3-14.9 9.3-14.9zm-15.6 19.1l-9.3-16.5-8.3 16.1c7 6.2 17.6 0.4 17.6 0.4zm-24.5-3.8l10.1-16.1-18.2 0.5c-2 9 8.1 15.6 8.1 \n15.6zm9.3-23.6l-11.8-13.9c-8.3 4.1-7.1 16.1-7.1 16.1z"/>\n</svg>`}}var h=function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((i=i.apply(e,t||[])).next())}))};class m{constructor(){this.mainSection=new c,this.controller=new o,this.animation=new l,this.templateCreator=new u,this.drawGarage=e=>h(this,void 0,void 0,(function*(){this.mainSection.drawMainSection(e),this.drawCars(e)}))}drawCars(e){return h(this,void 0,void 0,(function*(){const t=e;t.cars=[];const n=yield this.controller.getCars(+e.page),i=document.querySelector(".garageCars"),a=document.querySelector(".garageTitleAmount");i&&(i.innerHTML=""),a&&(a.textContent=`(${n.count})`),this.checkPaginationsButtons(e,n),n.items.forEach((e=>{t.cars.push(e);const n=document.createElement("div");n.innerHTML=this.templateCreator.createTemplate(e.name,e.color,e.id),i&&i.append(n)})),this.addListenersToCarField(e)}))}checkPaginationsButtons(e,t){const n=document.querySelector(".paginationNext"),i=document.querySelector(".paginationPrev");if(n){const{count:i}=t;i&&(+i/7<=e.page?n.disabled=!0:n.disabled=!1)}i&&(1===e.page?i.disabled=!0:i.disabled=!1)}addListeners(e){this.addListenerToPagination(e),this.addListenerToCreateInput(e),this.addListenerToUpdateInput(e),this.addListenerToGenerateBtn(e),this.addListenerToRaceButton(e),this.addListenerToResetButton(e)}addListenerToPagination(e){const t=document.querySelector(".paginationNext"),n=document.querySelector(".paginationPrev"),i=document.querySelector(".garagePageAmount"),a=e;t&&i&&t.addEventListener("click",(t=>{t.target&&(a.page+=1,i.textContent=`Page #${a.page}`,this.drawCars(e))})),n&&i&&n.addEventListener("click",(t=>{t.target&&a.page>1&&(a.page-=1,i.textContent=`Page #${a.page}`,this.drawCars(e))}))}addListenerToCreateInput(e){const t=document.querySelector(".createCarInput"),n=document.querySelector(".createColorInput"),i=document.querySelector(".createCarBtn");t&&n&&i&&i.addEventListener("click",(()=>{if(t.value&&n.value){const i={name:t.value,color:n.value};try{this.controller.createCar(i)}catch(e){console.log(e)}this.drawCars(e),t.value=""}}))}addListenerToUpdateInput(e){const t=document.querySelector(".updateCarInput"),n=document.querySelector(".updateColorInput"),i=document.querySelector(".updateCarBtn");t&&n&&i&&i.addEventListener("click",(()=>{if(t.value){const a={name:t.value,color:n.value},r=i.getAttribute("data-id");if(r){const n=Number(r);try{this.updateCar(n,a,e)}catch(e){console.log(e)}finally{t.value="",t.disabled=!0,i.removeAttribute("data-id")}}}}))}updateCar(e,t,n){return h(this,void 0,void 0,(function*(){yield this.controller.updateCar(e,t),this.drawCars(n)}))}addListenerToRaceButton(e){return h(this,void 0,void 0,(function*(){const t=document.querySelector(".btnStartRace"),n=document.querySelector(".resetBtn"),i=document.querySelector(".winnersBTN"),a=document.querySelector(".garageModal"),r=document.querySelectorAll(".pagination-btn");null==t||t.addEventListener("click",(()=>{t&&this.disableBtn(t),i&&this.disableBtn(i),r&&r.forEach((e=>this.disableBtn(e)));const o=this.race(e);o||n&&this.enableBtn(n),o.then((e=>{if(e.id){const t={id:e.id,time:e.time};this.controller.saveWinner(t)}a&&(a.textContent=`${e.name} выиграл гонку за ${e.time}s`,a.classList.add("garageModal--active")),n&&this.enableBtn(n),i&&this.enableBtn(i),r&&r.forEach((e=>this.enableBtn(e)))}))}))}))}addListenerToResetButton(e){return h(this,void 0,void 0,(function*(){const t=document.querySelector(".resetBtn"),n=document.querySelector(".btnStartRace"),i=document.querySelector(".garageModal"),a=e;null==t||t.addEventListener("click",(()=>{a.cars.map((({id:e})=>this.stopDriving(e,a))),n&&(n.disabled=!1),i&&i.classList.remove("garageModal--active"),t.disabled=!0}))}))}addListenerToGenerateBtn(e){return h(this,void 0,void 0,(function*(){const t=document.querySelector(".btnGenerateCars");null==t||t.addEventListener("click",(t=>{const n=t.target;n.disabled=!0;const i=this.templateCreator.generateRandomCars();Promise.all(i.map((e=>h(this,void 0,void 0,(function*(){return this.controller.createCar(e)}))))),this.drawCars(e),n.disabled=!1}))}))}addListenersToCarField(e){this.addListenerToSelectBtn(),this.addListenerToRemoveBtn(e),this.addListenerToStartEngineBtn(e),this.addListenerToStopEngineBtn(e)}addListenerToSelectBtn(){const e=document.querySelectorAll(".car__field-select"),t=document.querySelector(".updateCarInput"),n=document.querySelector(".updateColorInput"),i=document.querySelector(".updateCarBtn");e.forEach((e=>{e.addEventListener("click",(()=>{var a,r;const o=e.closest(".car__field");if(o&&t&&n){const e=o.getAttribute("id");if(e){const s=null===(a=o.querySelector(".car__field-model"))||void 0===a?void 0:a.textContent,d=null===(r=o.querySelector(".car-image"))||void 0===r?void 0:r.getAttribute("data-color");s&&d&&(t.value=s,t.disabled=!1,n.value=d,null==i||i.setAttribute("data-id",e))}}}))}))}addListenerToRemoveBtn(e){document.querySelectorAll(".car__field-remove").forEach((t=>{t.addEventListener("click",(()=>{const n=t.closest(".car__field");if(n){const t=n.getAttribute("id");if(t){const n=Number(t);try{this.deleteCar(n,e)}catch(e){console.log(e)}}}}))}))}deleteCar(e,t){return h(this,void 0,void 0,(function*(){yield this.controller.deleteCar(e),yield this.controller.deleteWinner(e),this.drawCars(t)}))}addListenerToStartEngineBtn(e){document.querySelectorAll(".car-start-btn").forEach((t=>{t.addEventListener("click",(t=>{const n=t.target;n.disabled=!0;const i=n.closest(".car__field"),a=null==i?void 0:i.querySelector(".car-stop-btn"),r=null==i?void 0:i.getAttribute("id");if(r){const t=Number(r);try{this.startDriving(t,e)}catch(e){n.disabled=!1}}a&&(a.disabled=!1)}))}))}addListenerToStopEngineBtn(e){document.querySelectorAll(".car-stop-btn").forEach((t=>{t.addEventListener("click",(t=>{const n=t.target;n.disabled=!0;const i=n.closest(".car__field"),a=null==i?void 0:i.querySelector(".car-start-btn"),r=null==i?void 0:i.getAttribute("id");if(r){const t=Number(r);(null==i?void 0:i.querySelector(".car-image"))&&(this.stopDriving(t,e),a&&(a.disabled=!1))}}))}))}startDriving(e,t){return h(this,void 0,void 0,(function*(){const n=t,{velocity:i,distance:a}=yield this.controller.startEngine(e),r=Math.round(a/i),o=document.getElementById(`${e}`),s=null==o?void 0:o.querySelector(".car-image"),d=null==o?void 0:o.querySelector(".flag-image");if(s&&d){const t=Math.floor(this.animation.getDistanceBetweenElements(s,d)+60);n.animation[e]=this.animation.animation(s,t,r)}const{success:c}=yield this.controller.drive(e);return c||window.cancelAnimationFrame(t.animation[e].id),{success:c,id:e,time:r}}))}stopDriving(e,t){return h(this,void 0,void 0,(function*(){const n=t,i=document.getElementById(`${e}`),a=null==i?void 0:i.querySelector(".car-image");yield this.controller.stopEngine(e).then((()=>{n.animation[e]&&window.cancelAnimationFrame(n.animation[e].id),a&&(a.style.transform="translateX(0)")}))}))}race(e){return h(this,void 0,void 0,(function*(){const t=e,n=t.cars.map((({id:t})=>this.startDriving(t,e)));return yield this.raceAll(n,t.cars.map((e=>e.id)),e)}))}raceAll(e,t,n){return h(this,void 0,void 0,(function*(){const{success:i,id:a,time:r}=yield Promise.race(e),o=n;if(!i){const i=document.querySelector(".resetBtn"),r=t.findIndex((e=>e===a)),o=[...e.slice(0,r),...e.slice(r+1,e.length)],s=[...t.slice(0,r),...t.slice(r+1,t.length)];return 0===s.length&&i&&this.enableBtn(i),this.raceAll(o,s,n)}return Object.assign(Object.assign({},o.cars.find((e=>e.id===a))),{time:+(r/1e3).toFixed(2)})}))}disableBtn(e){e.disabled=!0}enableBtn(e){e.disabled=!1}}class g{constructor(){this.winnersContainer=document.createElement("div"),this.winnersTitle=document.createElement("h1"),this.winnersPageNumber=document.createElement("div"),this.winnersTable=document.createElement("div"),this.winnersTableHead=document.createElement("thead"),this.winnersTableHeadNumber=document.createElement("th"),this.winnersTableHeadCar=document.createElement("th"),this.winnersTableHeadName=document.createElement("th"),this.winnersTableHeadWins=document.createElement("th"),this.winnersTableHeadTime=document.createElement("th"),this.winnersTableBody=document.createElement("tbody"),this.winnersPagination=document.createElement("div"),this.paginationPrev=document.createElement("button"),this.paginationNext=document.createElement("button")}drawWinners(){const e=document.querySelector(".mainContainer");this.makeWinnersContainer(),e&&(e.innerHTML="",e.append(this.winnersContainer))}makeWinnersContainer(){this.winnersContainer.classList.add("winnersContainer"),this.makeTitle(),this.makeTable(),this.makePagination(),this.winnersContainer.append(this.winnersTitle,this.winnersPageNumber,this.winnersTable,this.winnersPagination)}makeTitle(){this.winnersTitle.classList.add("winnersTitle"),this.winnersTitle.textContent="Winners (0)",this.winnersPageNumber.classList.add("winnersPageNumber"),this.winnersPageNumber.textContent="Page #1"}makeTable(){this.makeTableHeads(),this.makeTableBody(),this.makeTableHead(),this.winnersTable.classList.add("winnersTable"),this.winnersTable.append(this.winnersTableHead,this.winnersTableBody)}makeTableHead(){this.winnersTableHead.classList.add("tableHead"),this.winnersTableHead.append(this.winnersTableHeadNumber,this.winnersTableHeadCar,this.winnersTableHeadName,this.winnersTableHeadWins,this.winnersTableHeadTime)}makeTableHeads(){this.winnersTableHeadNumber.classList.add("tableHeadNumber","tableHead"),this.winnersTableHeadNumber.textContent="Number",this.winnersTableHeadCar.classList.add("tableHeadCar","tableHead"),this.winnersTableHeadCar.textContent="Car",this.winnersTableHeadName.classList.add("tableHeadName","tableHead"),this.winnersTableHeadName.textContent="Name",this.winnersTableHeadWins.classList.add("tableHeadWins","tableHead"),this.winnersTableHeadWins.textContent="Wins",this.winnersTableHeadTime.classList.add("tableHeadTime","tableHead"),this.winnersTableHeadTime.textContent="Time"}makeTableBody(){this.winnersTableBody.classList.add("tableBody")}makePagination(){this.winnersPagination.classList.add("winnersPaginations"),this.makePaginationPrev(),this.makePaginationNext(),this.winnersPagination.append(this.paginationPrev,this.paginationNext)}makePaginationPrev(){this.paginationPrev.classList.add("winnersPaginationPrev","pagination-btn"),this.paginationPrev.setAttribute("id","winnersPaginationPrev"),this.paginationPrev.textContent="PREV"}makePaginationNext(){this.paginationNext.classList.add("winnersPaginationNext","pagination-btn"),this.paginationNext.textContent="NEXT",this.paginationNext.setAttribute("id","winnersPaginationNext")}}var p=function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}d((i=i.apply(e,t||[])).next())}))};class b{constructor(){this.winners=new g,this.controller=new o,this.templateCreator=new u,this.drawWinners=e=>p(this,void 0,void 0,(function*(){this.winners.drawWinners(),this.updateWinners(e)}))}updateWinners(e){return p(this,void 0,void 0,(function*(){const t=document.querySelector(".winnersTitle"),n=document.querySelector(".tableBody"),i=document.querySelector(".winnersPageNumber");n&&(n.innerHTML="");const a=yield this.controller.getWinners({page:e.winnersPage,sort:e.sort,order:e.order});this.checkPaginationsButtons(e,a),t&&(t.textContent=` Winners (${a.count})`),i&&(i.textContent=`Page #${e.winnersPage}`),a.items.forEach(((t,i)=>{const a=document.createElement("tr");a.innerHTML=this.templateCreator.createRowTemplate(t,i,e.winnersPage),null==n||n.append(a)}))}))}addListeners(e){this.addListenersToPagination(e),this.addListenerToTable(e)}addListenersToPagination(e){const t=document.querySelector(".winnersPaginationNext"),n=document.querySelector(".winnersPaginationPrev"),i=document.querySelector(".winnersPageNumber"),a=e;t&&i&&t.addEventListener("click",(t=>{t.target&&(a.winnersPage+=1,i.textContent=`Page #${a.winnersPage}`,this.updateWinners(e))})),n&&i&&n.addEventListener("click",(t=>{t.target&&a.winnersPage>1&&(a.winnersPage-=1,i.textContent=`Page #${a.winnersPage}`,this.updateWinners(e))}))}checkPaginationsButtons(e,t){const n=document.querySelector(".winnersPaginationNext"),i=document.querySelector(".winnersPaginationPrev"),{count:a}=t;n&&a&&(+a/10<=e.winnersPage?n.disabled=!0:n.disabled=!1),i&&(1===e.winnersPage?i.disabled=!0:i.disabled=!1)}addListenerToTable(e){const t=e,n=document.querySelector(".tableHeadWins"),i=document.querySelector(".tableHeadTime");null==n||n.addEventListener("click",(()=>{t.sort="wins","ASC"===t.order?(t.order="DESC",n.textContent="Wins ↑"):(t.order="ASC",n.textContent="Wins ↓"),this.updateWinners(e)})),null==i||i.addEventListener("click",(()=>{t.sort="time","ASC"===t.order?(t.order="DESC",i.textContent="Time ↑"):(t.order="ASC",i.textContent="Time ↓"),this.updateWinners(e)}))}}(new class{constructor(){this.state={view:"garage",page:1,animation:[],cars:[],winnersPage:1,sort:"id",order:"ASC"},this.header=new a,this.drawGarage=new m,this.drawWinners=new b}start(){alert("Самооценка в консоли"),console.log("%cOnline-store-task","font-weight: bold; font-size: 18px"),console.log("%c190/190","font-weight: bold; font-size: 18px"),console.log("Selftest: \n https://ilyxxaa.notion.site/Async-race-self-test-4a0ddcb7014244f5a74949622aa8cf9d\n\n"),this.header.drawHeader(this.drawGarage.drawGarage,this.drawWinners.drawWinners,this.state),this.drawWinners.drawWinners(this.state),this.drawWinners.addListeners(this.state),this.drawGarage.drawGarage(this.state),this.drawGarage.addListeners(this.state)}}).start()})()})();